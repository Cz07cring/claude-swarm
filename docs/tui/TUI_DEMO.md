# TUI 界面演示指南

## 🎬 快速体验新界面

### 1. 查看更新内容
```bash
# 查看详细优化总结
cat TUI_OPTIMIZATION_SUMMARY.md

# 查看 Git 提交
git show 01d409a
```

### 2. 启动监控面板
```bash
# 启动 TUI 监控界面
./bin/swarm monitor
```

如果还没有运行中的 swarm，会看到友好的错误提示。

### 3. 完整体验流程

#### 步骤 1: 启动 Swarm 集群
```bash
# 先启动集群（需要 tmux）
./bin/swarm start --agents 5
```

#### 步骤 2: 添加一些测试任务
```bash
./bin/swarm add-task "实现用户认证模块"
./bin/swarm add-task "设计数据库表结构"
./bin/swarm add-task "编写 API 接口文档"
./bin/swarm add-task "实现前端登录页面"
./bin/swarm add-task "编写单元测试"
```

#### 步骤 3: 打开监控面板
```bash
./bin/swarm monitor
```

现在你会看到：
- 🐝 **顶部标题**: Claude Agent Swarm Monitor
- 📊 **状态栏**: 实时显示 Agent 和任务统计
- 📋 **任务面板**: 5 个任务，带彩色状态图标
- 🤖 **Agent 面板**: 5 个 Agent，2x3 网格布局
- 📜 **日志面板**: 显示选中 Agent 的实时日志

---

## 🎮 交互操作演示

### 场景 1: 浏览任务列表
```
1. 启动后默认在 Tasks 面板（左侧）
2. 按 ↓ 向下浏览任务
3. 注意观察：
   ⏳ 待处理 - 灰色
   🔄 进行中 - 蓝色
   ✅ 已完成 - 绿色
   ❌ 失败 - 红色
4. 按 Home 跳到第一个任务
5. 按 End 跳到最后一个任务
```

### 场景 2: 查看 Agent 状态
```
1. 按 Tab 切换到 Agents 面板（中间）
2. 观察网格布局：
   - 5 个 Agent = 2x3 网格
   - 每个单元格显示：
     😴 空闲 / 🚀 工作中 / ⏸️ 等待 / ❌ 错误
3. 使用 ↑↓←→ 或 hjkl 导航
4. 尝试从边界继续移动 - 会自动循环
5. 按 Enter 选择一个正在工作的 Agent
```

### 场景 3: 查看实时日志
```
1. 选择一个 Agent 后，右侧 Logs 面板自动更新
2. 观察日志显示：
   📌 agent-1 [工作中]  ← 状态徽章
   ───────────────────
   📋 任务:
   实现用户认证模块
   ───────────────────
   📜 输出:
     1│ Starting task...
     2│ Installing dependencies...
     3│ Running build...
     ...
3. 按 Tab 切换到 Logs 面板
4. 按 PageDown 向下滚动历史日志
5. 按 PageUp 向上滚动
6. 按 'a' 切换自动滚动模式
7. 观察底部的滚动位置指示器
```

### 场景 4: 监控集群状态
```
1. 观察顶部状态栏：
   Agents: 3/5 工作中 • 2 空闲
   ↑ 实时更新

2. 观察完成率：
   完成率: 60.0%
   ↑ 动态计算

3. 注意警告提示：
   ⚠ 1 错误  ← 红色警告
   ⏸ 1 等待  ← 黄色提示
```

### 场景 5: 测试自适应布局
```
1. 启动更多 Agent：
   swarm stop
   swarm start --agents 10

2. 重新打开 monitor
3. 观察：
   - 10 个 Agent = 4x3 网格
   - 单元格自动变小
   - 紧凑模式启用（更少行高）

4. 继续测试：
   swarm start --agents 3
   → 2x2 网格

   swarm start --agents 16
   → 4x4 网格
```

---

## 🎨 视觉对比

### 改进前
```
Claude Agent Swarm Monitor

Tasks              | Agents           | Logs
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
○ Task 1           | ┌──────┬──────┐  | agent-1
● Task 2           | │ ○ A1 │ ● A2 │  | idle
✓ Task 3           | ├──────┼──────┤  | No output
✗ Task 4           | │ ● A3 │ ○ A4 │  |
                   | └──────┴──────┘  |

Tab: switch | ↑↓: navigate | q: quit
```

### 改进后
```
🐝 Claude Agent Swarm Monitor
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Agents: 3/5 工作中 • 2 空闲 | Tasks: 4 总计 • 1 完成 • 2 进行中 • 1 待处理 | 完成率: 25.0%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 Tasks ◄          | 🤖 Agents        | 📜 Logs
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏳ Task 1 [agent-1] | ╔════════════╗   | 📌 agent-1 [工作中]
   5m               | ║ 🚀 agent-1 ║   | ───────────────────
🔄 Task 2 [agent-2] | ║ 工作中     ║   | 📋 任务:
   3m               | ║ Task 1...  ║   | Implement auth...
✅ Task 3 [agent-3] | ╚════════════╝   | ───────────────────
   1h               | ┌────────────┐   | 📜 输出: [自动滚动]
❌ Task 4 [-]       | │ 😴 agent-2 │   |   1│ Starting...
   2h               | │ 空闲       │   |   2│ npm install
                    | └────────────┘   |   3│ Building...
                    |                  |   ...
                    |                  |  45│ ✓ Success
                    |                  | ─ 1-45 / 120 行 ─

Tab: 切换面板 | ↑↓/jk: 导航 | Home/End: 首个/末个 | q: 退出 | r: 刷新
```

---

## 🎯 关键亮点展示

### 1. 状态栏实时指标 📊
**看点**: 一目了然的集群健康状态
```
Agents: 3/5 工作中 • 2 空闲
       ↑ ↑ ↑         ↑
       │ │ │         └─ 空闲数量
       │ │ └─────────── 总 Agent 数
       │ └─────────────── 工作中数量
       └───────────────── 标签

Tasks: 10 总计 • 7 完成 • 2 进行中 • 1 待处理
      ↑        ↑        ↑          ↑
      │        │        │          └─ 待处理任务
      │        │        └──────────── 进行中任务
      │        └─────────────────────── 完成任务（绿色）
      └──────────────────────────────── 总任务数

完成率: 70.0%  ← 动态计算（已完成/总数）

⚠ 1 错误  ← 红色警告（有问题的 Agent）
⏸ 1 等待  ← 黄色提示（等待用户确认）
✗ 1 失败  ← 失败的任务
```

### 2. 自适应网格布局 📐
**看点**: 任意数量 Agent 都完美适配
```
3 Agents → 2x2     9 Agents → 3x3     16 Agents → 4x4
┌────┬────┐        ┌───┬───┬───┐      ┌──┬──┬──┬──┐
│ 1  │ 2  │        │ 1 │ 2 │ 3 │      │ 1│ 2│ 3│ 4│
├────┼────┤        ├───┼───┼───┤      ├──┼──┼──┼──┤
│ 3  │    │        │ 4 │ 5 │ 6 │      │ 5│ 6│ 7│ 8│
└────┴────┘        ├───┼───┼───┤      ├──┼──┼──┼──┤
                   │ 7 │ 8 │ 9 │      │ 9│10│11│12│
                   └───┴───┴───┘      ├──┼──┼──┼──┤
                                      │13│14│15│16│
                                      └──┴──┴──┴──┘
```

### 3. 滚动日志查看器 📜
**看点**: 查看完整执行历史
```
📜 输出: [滚动模式]  ← 状态指示器
  1│ Starting task execution...
  2│ [DEBUG] Initializing agent
  3│ [INFO] Loading configuration
  4│ [INFO] Installing dependencies
  5│     npm install axios
  6│     npm install dotenv
  ...
 45│ [INFO] Build successful ✓
─ 1-45 / 120 行 ─  ← 滚动位置指示器
     ↑  ↑    ↑
     │  │    └─ 总行数
     │  └────── 当前显示结束行
     └───────── 当前显示开始行
```

### 4. 循环导航 🔄
**看点**: 无缝浏览，无需回头
```
从第 9 个 Agent 按右键 → 自动跳到第 7 个（同一行开头）
从第 1 个 Agent 按上键 → 自动跳到第 7 个（最后一行同列）
从第 7 个 Agent 按下键 → 自动跳到第 1 个（第一行同列）
从第 7 个 Agent 按左键 → 自动跳到第 9 个（同一行末尾）
```

---

## 🔧 故障排除

### Q: 启动 monitor 提示找不到文件
```bash
❌ 打开任务队列失败: no such file or directory
```

**解决**: 先启动 swarm 或指定自定义路径
```bash
# 方案 1: 启动 swarm
swarm start --agents 3

# 方案 2: 使用自定义路径
swarm monitor --queue ./tasks.json --state ./agents.json
```

### Q: Emoji 显示为方框
**原因**: 终端不支持 Emoji
**解决**: 使用支持 UTF-8 的现代终端（iTerm2、Alacritty）

### Q: 颜色显示异常
**原因**: 终端不支持 256 色
**解决**:
```bash
# 检查终端颜色支持
echo $TERM

# 设置为 256 色模式
export TERM=xterm-256color
```

### Q: 布局错乱
**原因**: 终端窗口太小
**解决**: 调整终端窗口大小（建议最小 80x24）

---

## 📸 截图建议

想要截图展示？建议捕捉这些场景：

1. **总览视图**: 显示完整的三面板布局
2. **状态栏特写**: 高亮集群指标
3. **Agent 网格**: 展示不同数量 Agent 的布局
4. **日志滚动**: 显示滚动指示器和行号
5. **循环导航**: GIF 动画展示循环导航效果

---

## 🎓 最佳实践

### 1. 日常监控
```bash
# 在 tmux 会话中运行 swarm
tmux new -s swarm-cluster
swarm start --agents 5

# 新建窗格运行 monitor
tmux split-window -h
swarm monitor

# 现在可以同时看到：
# - 左侧：swarm 运行日志
# - 右侧：TUI 监控面板
```

### 2. 调试单个 Agent
```
1. 在 Agents 面板选中目标 Agent
2. 按 Tab 切换到 Logs 面板
3. 按 Home 跳到日志开头
4. 按 PageDown 逐页查看
5. 按 'a' 返回自动滚动模式
```

### 3. 监控任务进度
```
1. 在 Tasks 面板查看任务列表
2. 观察状态栏的完成率
3. 使用 ↓ 浏览各个任务
4. 按 Enter 查看任务对应的 Agent
```

---

## 🎉 享受新界面！

现在你已经掌握了所有新功能。快去体验更强大、更美观的 TUI 监控面板吧！

有任何问题或建议，欢迎提 Issue 或 PR。

---

*演示指南创建时间: 2026-01-31*
*TUI 版本: v2.0 (优化版)*
*作者: Claude Sonnet 4.5*
